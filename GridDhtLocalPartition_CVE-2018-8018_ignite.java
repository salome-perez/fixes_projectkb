public class GridDhtLocalPartition {
    public void awaitDestroy() {
        if (state() != EVICTED)
            return;

        final long timeout = 10_000;

        for (;;) {
            try {
                rent.get(timeout);

                break;
            }
            catch (IgniteFutureTimeoutCheckedException ignored) {
                U.warn(log, "Failed to await partition destroy within timeout " + this);
            }
            catch (IgniteCheckedException e) {
                throw new IgniteException("Failed to await partition destroy " + this, e);
            }
        }
    }

}