public class RequestScopedCache {
    public static void beginRequest() {
        // if the previous request was not ended properly for some reason, make sure it is ended now
        endRequest();
        CACHE.set(new LinkedList<RequestScopedItem>());
    }

    public static void endRequest() {
        final List<RequestScopedItem> result = CACHE.get();
        if (result != null) {
            CACHE.remove();
            for (final RequestScopedItem item : result) {
                item.invalidate();
            }
        }
    }

}