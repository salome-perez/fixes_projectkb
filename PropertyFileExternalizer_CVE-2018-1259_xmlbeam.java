public class PropertyFileExternalizer {
    private void updateProps() {
        if (!propertyFile.canRead()) {
            throw new XBException("Can not read file '" + propertyFile + "'");
        }
        long fileTS = propertyFile.lastModified();
        if (lastReadTS > fileTS) {
            return;
        }
        props.clear();
        FileInputStream inputStream = null;
        try {
            inputStream = new FileInputStream(propertyFile);
            if (useXmlFormat) {
                props.loadFromXML(inputStream);
                return;
            }
            @SuppressWarnings("resource")
            InputStreamReader reader = new InputStreamReader(inputStream, encodingName);
            props.load(reader);
        } catch (IOException e) {
            throw new XBIOException("Error while reading file '" + propertyFile + "'", e);
        } finally {
            lastReadTS = fileTS;
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {
                    throw new XBIOException("Can not close file '" + propertyFile + "'", e);
                }
            }
        }
    }

}