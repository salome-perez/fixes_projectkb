public class SimpleBufferingClientHttpRequest {
	@Override
	protected ClientHttpResponse executeInternal(HttpHeaders headers, byte[] bufferedOutput) throws IOException {
		addHeaders(this.connection, headers);

		// JDK < 1.8 doesn't support getOutputStream with HTTP DELETE
		if (HttpMethod.DELETE.equals(getMethod()) && bufferedOutput.length == 0) {
			this.connection.setDoOutput(false);
		}

		if (this.connection.getDoOutput() && this.outputStreaming) {
			this.connection.setFixedLengthStreamingMode(bufferedOutput.length);
		}
		this.connection.connect();
		if (this.connection.getDoOutput()) {
			FileCopyUtils.copy(bufferedOutput, this.connection.getOutputStream());
		}

		return new SimpleClientHttpResponse(this.connection);
	}

}