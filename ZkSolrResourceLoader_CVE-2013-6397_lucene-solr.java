public class ZkSolrResourceLoader {
  public InputStream openResource(String resource) throws IOException {
    InputStream is = null;
    String file = collectionZkPath + "/" + resource;
    try {
      if (zkController.pathExists(file)) {
        byte[] bytes = zkController.getZkClient().getData(file, null, null, true);
        return new ByteArrayInputStream(bytes);
      }
    } catch (Exception e) {
      throw new IOException("Error opening " + file, e);
    }
    try {
      // delegate to the class loader (looking into $INSTANCE_DIR/lib jars)
      is = classLoader.getResourceAsStream(resource.replace(File.separatorChar, '/'));
    } catch (Exception e) {
      throw new IOException("Error opening " + resource, e);
    }
    if (is == null) {
      throw new IOException("Can't find resource '" + resource
          + "' in classpath or '" + collectionZkPath + "', cwd="
          + System.getProperty("user.dir"));
    }
    return is;
  }

}