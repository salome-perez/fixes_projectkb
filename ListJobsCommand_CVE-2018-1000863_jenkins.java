public class ListJobsCommand {

    protected int run() throws Exception {
        Jenkins h = Jenkins.getActiveInstance();
        final Collection<TopLevelItem> jobs;

        // If name is given retrieve jobs for the given view.
        if (name != null) {
            View view = h.getView(name);

            if (view != null) {
                jobs = view.getAllItems();
            }
            // If no view was found, try with an item group.
            else {
                final Item item = h.getItemByFullName(name);

                // If item group was found use it's jobs.
                if (item instanceof ModifiableTopLevelItemGroup) {
                    jobs = ((ModifiableTopLevelItemGroup) item).getAllItems(TopLevelItem.class);
                }
                // No view and no item group with the given name found.
                else {
                    throw new IllegalArgumentException("No view or item group with the given name '" + name + "' found.");
                }
            }
        }
        // Fallback to listing all jobs.
        else {
            jobs = h.getItems();
        }

        // Print all jobs.
        for (TopLevelItem item : jobs) {
            stdout.println(item.getName());
        }

        return 0;
    }

}