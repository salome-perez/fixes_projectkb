public class DOMHelper {
    public static String toXMLString(final XBProjector projector, final Node domNode) {
        if (domNode == null) {
            return "<null>";
        }
        if (domNode.getNodeType() == Node.ATTRIBUTE_NODE) {
            return domNode.toString();
        }
        try {
            final StringWriter writer = new StringWriter();
            projector.config().createTransformer().transform(new DOMSource(domNode), new StreamResult(writer));
            final String output = writer.getBuffer().toString();
            return output;
        } catch (TransformerConfigurationException e) {
            throw new XBException("Error while creating transformer",e);
        } catch (TransformerException e) {
            throw new XBException("Error while transforming document",e);
        }

    }

}