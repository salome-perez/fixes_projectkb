public class CIMInstance {
    private void createCredentials(String username, String password) {
        try{
            UsernamePasswordCredentialsImpl credential = new UsernamePasswordCredentialsImpl(
                    CredentialsScope.GLOBAL, name + "_" + username, "Migrated Coverity Credential", username, password);

            CredentialsStore store = CredentialsProvider.lookupStores(Jenkins.getInstance()).iterator().next();
            store.addCredentials(Domain.global(), credential);
        } catch (IOException ioe) {
            logger.warning("Migrating username and password into credentials encountered IOException"
            + "\nPlease try to resolve this issue by adding credentials manually");
        }
    }

    public CIMInstance cloneWithCredential(String credentialId) {
        CIMInstance instance = new CIMInstance(name, host, port, credentialId);
        instance.setUseSSL(useSSL);
        return instance;
    }

}