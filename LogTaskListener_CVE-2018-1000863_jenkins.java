public class LogTaskListener {
        @Override
        public void write(int b) throws IOException {
            if (b == '\r' || b == '\n') {
                flush();
            } else {
                baos.write(b);
            }
        }

    public PrintStream getLogger() {
        return delegate.getLogger();
    }

        @Override
        public void close() throws IOException {
            flush();
        }

    @Override
    @SuppressWarnings("rawtypes")
    public void annotate(ConsoleNote ann) {
        // no annotation support
    }

}