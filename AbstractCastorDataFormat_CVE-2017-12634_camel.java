public class AbstractCastorDataFormat {
    public Unmarshaller createUnmarshaller(Exchange exchange) throws Exception {
        // need to create new marshaller as we may have concurrent processing
        Unmarshaller answer = xmlContext.createUnmarshaller();
        answer.setValidation(isValidation());
        if (whitlistEnabled) {
            WhitelistObjectFactory factory = new WhitelistObjectFactory();
            factory.setAllowClasses(allowedUnmarshallObjects);
            factory.setDenyClasses(deniedUnmarshallObjects);
            answer.setObjectFactory(factory);
        }
        return answer;
    }

}